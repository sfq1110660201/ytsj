webpackJsonp([2,47,49,50],{242:function(t,e,a){e=t.exports=a(4)(),e.push([t.id,".addContent[data-v-ff9a9e32]{padding-left:82px}.addContent .addModel[data-v-ff9a9e32]{overflow:hidden}.warned[data-v-ff9a9e32]{color:#f8534c;font-size:13px}.uploadImgContent[data-v-ff9a9e32]{overflow:hidden}.ipLogo[data-v-ff9a9e32]{float:left;width:133px;height:133px}.upLoadImg[data-v-ff9a9e32]{float:left;margin-left:15px}.upLoadImgDescription[data-v-ff9a9e32]{margin-bottom:77px;color:#b0b0b0}.textarea[data-v-ff9a9e32]{height:130px;resize:none}.form-group[data-v-ff9a9e32]{margin-bottom:20px}.marginRepair[data-v-ff9a9e32]{margin-top:40px}.paddingRepair[data-v-ff9a9e32]{background:#6dc5a3!important;color:#fff!important}.uploadA[data-v-ff9a9e32]{width:100px;height:30px;overflow:hidden;position:relative}.uploadA #formOne .uploadIpt[data-v-ff9a9e32],.uploadA #formTwo .uploadIpt[data-v-ff9a9e32]{width:100%;height:100%;opacity:0;position:absolute;top:0;left:0;z-index:999}.uploadA span[data-v-ff9a9e32]{width:100%;height:100%;position:absolute;top:3px;left:0;z-index:666}","",{version:3,sources:["/./src/page/contentEdit/children/setting.vue"],names:[],mappings:"AACA,6BAA6B,iBAAiB,CAC7C,AACD,uCAAuC,eAAe,CACrD,AACD,yBAAyB,cAAc,cAAc,CACpD,AACD,mCAAmC,eAAe,CACjD,AACD,yBAAyB,WAAW,YAAY,YAAY,CAC3D,AACD,4BAA4B,WAAW,gBAAgB,CACtD,AACD,uCAAuC,mBAAmB,aAAa,CACtE,AACD,2BAA2B,aAAa,WAAW,CAClD,AACD,6BAA6B,kBAAkB,CAC9C,AACD,+BAA+B,eAAe,CAC7C,AACD,gCAAgC,6BAA8B,oBAAqB,CAClF,AACD,0BAA0B,YAAY,YAAY,gBAAgB,iBAAiB,CAClF,AACD,4FAA4F,WAAW,YAAY,UAAU,kBAAkB,MAAM,OAAO,WAAW,CACtK,AACD,+BAA+B,WAAW,YAAY,kBAAkB,QAAQ,OAAO,WAAW,CACjG",file:"setting.vue",sourcesContent:["\n.addContent[data-v-ff9a9e32]{padding-left:82px\n}\n.addContent .addModel[data-v-ff9a9e32]{overflow:hidden\n}\n.warned[data-v-ff9a9e32]{color:#f8534c;font-size:13px\n}\n.uploadImgContent[data-v-ff9a9e32]{overflow:hidden\n}\n.ipLogo[data-v-ff9a9e32]{float:left;width:133px;height:133px\n}\n.upLoadImg[data-v-ff9a9e32]{float:left;margin-left:15px\n}\n.upLoadImgDescription[data-v-ff9a9e32]{margin-bottom:77px;color:#b0b0b0\n}\n.textarea[data-v-ff9a9e32]{height:130px;resize:none\n}\n.form-group[data-v-ff9a9e32]{margin-bottom:20px\n}\n.marginRepair[data-v-ff9a9e32]{margin-top:40px\n}\n.paddingRepair[data-v-ff9a9e32]{background:#6dc5a3 !important;color:#fff !important\n}\n.uploadA[data-v-ff9a9e32]{width:100px;height:30px;overflow:hidden;position:relative\n}\n.uploadA #formOne .uploadIpt[data-v-ff9a9e32],.uploadA #formTwo .uploadIpt[data-v-ff9a9e32]{width:100%;height:100%;opacity:0;position:absolute;top:0;left:0;z-index:999\n}\n.uploadA span[data-v-ff9a9e32]{width:100%;height:100%;position:absolute;top:3px;left:0;z-index:666\n}\n"],sourceRoot:"webpack://"}])},296:function(t,e,a){var i=a(242);"string"==typeof i&&(i=[[t.id,i,""]]);a(5)(i,{});i.locals&&(t.exports=i.locals)},314:function(t,e,a){a(296);var i=a(6)(a(724),a(396),"data-v-ff9a9e32",null);t.exports=i.exports},396:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addContent"},[a("section",{staticClass:"addModel"},[a("form",{staticClass:"form-horizontal",attrs:{role:"form"}},[a("div",{staticClass:"form-group"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"},[t._v("医图号名称")]),t._v(" "),a("div",{staticClass:"col-sm-5 col-xs-5"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.ipName,expression:"ipName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",maxlength:"16"},domProps:{value:t.ipName},on:{blur:[function(e){t.isRepeatName(t.ipName)},function(e){t.$forceUpdate()}],input:function(e){e.target.composing||(t.ipName=e.target.value.trim())}}}),t._v(" "),a("p",{staticClass:"form-control-static warned",domProps:{textContent:t._s(t.isNameRepeat)}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"},[t._v("医图号logo")]),t._v(" "),a("div",{staticClass:"col-sm-10 col-xs-10 uploadImgContent"},[a("img",{staticClass:"ipLogo",attrs:{src:t.imgOneSrc}}),t._v(" "),a("div",{staticClass:"upLoadImg"},[a("p",{staticClass:"upLoadImgDescription"},[t._v("图片格式必须为：png、jpg、jpeg、gif;图片不可大于2M")]),t._v(" "),a("a",{staticClass:"uploadA btn btn-default",attrs:{href:"javascript:void(0);"}},[a("span",[t._v("选择图片")]),t._v(" "),a("form",{attrs:{id:"formOne"}},[a("input",{staticClass:"uploadIpt",attrs:{type:"file",name:"Filedata"},on:{change:t.iptOneChange}})])]),t._v(" "),a("p",{staticClass:"form-control-static warned",domProps:{textContent:t._s(t.isImgTypeOne)}})])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"},[t._v("二维码")]),t._v(" "),a("div",{staticClass:"col-sm-10 col-xs-10 uploadImgContent"},[a("img",{staticClass:"ipLogo",attrs:{src:t.imgTwoSrc}}),t._v(" "),a("div",{staticClass:"upLoadImg"},[a("p",{staticClass:"upLoadImgDescription"},[t._v("二维码图片要求清晰，最大2M，200*200像素")]),t._v(" "),a("a",{staticClass:"uploadA btn btn-default",attrs:{href:"javascript:void(0);"}},[a("span",[t._v("选择图片")]),t._v(" "),a("form",{attrs:{id:"formTwo"}},[a("input",{staticClass:"uploadIpt",attrs:{type:"file",name:"Filedata"},on:{change:t.iptTwoChange}})])]),t._v(" "),a("p",{staticClass:"form-control-static warned",domProps:{textContent:t._s(t.isImgTypeTwo)}})])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"},[t._v("医图号简介")]),t._v(" "),a("div",{staticClass:"col-sm-5 col-xs-5"},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.ipIntroduction,expression:"ipIntroduction",modifiers:{trim:!0}}],staticClass:"form-control textarea",domProps:{value:t.ipIntroduction},on:{input:function(e){e.target.composing||(t.ipIntroduction=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("p",{staticClass:"form-control-static warned",domProps:{textContent:t._s(t.introductionTip)}})])]),t._v(" "),a("div",{staticClass:"form-group"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"},[t._v("医图号描述")]),t._v(" "),a("div",{staticClass:"col-sm-2 col-xs-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.ipDescriptionA,expression:"ipDescriptionA"}],staticClass:"form-control",on:{click:t.chooseLebals1,change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.ipDescriptionA=e.target.multiple?a:a[0]}}},t._l(t.lebalsOne,function(e){return a("option",{domProps:{value:e.index}},[t._v(t._s(e.name))])})),t._v(" "),a("p",{staticClass:"form-control-static warned",domProps:{textContent:t._s(t.descriptionTip)}})]),t._v(" "),a("div",{staticClass:"col-sm-2 col-xs-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.ipDescriptionB,expression:"ipDescriptionB"}],staticClass:"form-control",on:{click:function(t){},change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.ipDescriptionB=e.target.multiple?a:a[0]}}},t._l(t.lebals[t.lebalIndex],function(e){return a("option",[t._v(t._s(e.name))])}))])]),t._v(" "),a("div",{staticClass:"form-group"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"},[t._v("医图号类型")]),t._v(" "),a("div",{staticClass:"col-sm-2 col-xs-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.ipType,expression:"ipType"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.ipType=e.target.multiple?a:a[0]}}},[a("option",[t._v("企业")]),t._v(" "),a("option",[t._v("医生")]),t._v(" "),a("option",[t._v("医疗机构")]),t._v(" "),a("option",[t._v("内容IP")])]),t._v(" "),a("p",{staticClass:"form-control-static warned",domProps:{textContent:t._s(t.typeTip)}})])]),t._v(" "),a("div",{staticClass:"form-group marginRepair"},[a("p",{staticClass:"col-sm-2 col-xs-2 textLeft control-label"}),t._v(" "),a("div",{staticClass:"col-sm-2 col-xs-2"},[a("input",{staticClass:"btn btn-default form-control paddingRepair",attrs:{type:"button",value:"提交"},on:{click:t.submit}})])])])])])},staticRenderFns:[]}},724:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{ipId:"",het:0,isNameRepeat:"",isImgTypeOne:" ",isImgTypeTwo:" ",introductionTip:"",descriptionTip:"",typeTip:"",imgOneSrc:"",imgTwoSrc:"",ipName:"",ipIntroduction:"",ipDescriptionA:"0",ipDescriptionB:"综合",ipType:"",isSubmit:!0,enterpriseId:"",lebalIndex:0,lebalsOne:[{index:0,name:"母婴健康"},{index:1,name:"饮食养生"},{index:2,name:"保健疗养"},{index:3,name:"两性生活"}],lebals:[[{name:"综合"},{name:"孕产指南"},{name:"科学哺育"},{name:"辣妈"},{name:"早教"},{name:"孕品"}],[{name:"综合"},{name:"营养饮食"},{name:"饮食禁忌"},{name:"菜谱"},{name:"食物相克"},{name:"食物热量"},{name:"中医食疗"}],[{name:"综合"},{name:"滋阴补肾"},{name:"其他"},{name:"美容"},{name:"加肥"},{name:"补血"},{name:"营养不良"},{name:"补钙"},{name:"补脾"},{name:"养肺"}],[{name:"综合"},{name:"青春期"},{name:"性生活"},{name:"同性生活"},{name:"两性用品"}]]}},components:{},mounted:function(){this.$nextTick(function(){this.het=window.screen.availHeight,this.enterpriseId=this.$route.query.enterpriseId,this.ipId=this.$route.query.ipId,this.getIpData()})},methods:{chooseLebals1:function(t){var t=event;this.lebalIndex=t.target.value.toString()},getIpData:function(){var t=localStorage.getItem("TOKEN");this.$http.get("https://api.lotusdata.com/ip/v1/ipm/"+this.ipId,{headers:{Authorization:t}}).then(function(t){if("0"==t.data.code){var e=t.data.data;this.ipName=e.Ipname,this.imgOneSrc=e.Pic,this.imgTwoSrc=e.Qrcode,this.ipIntroduction=e.Summary,this.ipType=e.Iptype}},function(){console.log("数据请求失败")})},isRepeatName:function(t){var e=localStorage.getItem("TOKEN"),a={filed:"ipname",data:t};this.$http.post("https://api.lotusdata.com/ip/v1/reg/checkdata",a,{headers:{Authorization:e}}).then(function(t){var e=t.data.data;1==e?this.isNameRepeat="名称检测已被注册，请使用新名称":0==e&&(this.isNameRepeat=" ")},function(){console.log("数据请求失败")})},iptOneChange:function(t){t.preventDefault();var e=t.target.files,a=new FormData;a.append("avatar",e[0]);var i=e[0],o=i.name.substring(i.name.indexOf(".")+1,i.name.length),n=i.size;"png"==o||"jpg"==o||"gif"==o||"jpeg"==o?n<2097152?(this.isImgTypeOne=" ",this.sendimgOne()):this.isImgTypeOne="*图片大小超出2M":this.isImgTypeOne="*图片不符合要求"},sendimgOne:function(){var t=localStorage.getItem("token"),e=(document.getElementById("formOne"),new FormData(formOne));this.$http.post("https://api.lotusdata.com/v1/file/standardupload",e,{headers:{Authorization:t}}).then(function(t){var e=t.data.data;this.imgOneSrc=e},function(){console.log("数据请求失败")})},iptTwoChange:function(t){t.preventDefault();var e=t.target.files,a=new FormData;a.append("avatar",e[0]);var i=e[0],o=i.name.substring(i.name.indexOf(".")+1,i.name.length),n=i.size;"png"==o||"jpg"==o||"gif"==o||"jpeg"==o?n<2097152?(this.isImgTypeTwo=" ",this.sendimgTwo()):this.isImgTypeTwo="*图片大小超出2M":this.isImgTypeTwo="*图片不符合要求"},sendimgTwo:function(){var t=localStorage.getItem("token"),e=(document.getElementById("formTwo"),new FormData(formTwo));this.$http.post("https://api.lotusdata.com/v1/file/standardupload",e,{headers:{Authorization:t}}).then(function(t){var e=t.data.data;this.imgTwoSrc=e},function(){console.log("数据请求失败")})},submit:function(){if(""==this.ipName)this.isNameRepeat="请输入医图号名称";else if(""==this.imgOneSrc)this.isImgTypeOne="请添加医图号logo图片";else if(""==this.imgTwoSrc)this.isImgTypeTwo="请添加二维码图片";else if(""==this.ipIntroduction)this.introductionTip="请填写医图号简介";else if(""==this.ipDescriptionA.toString())this.descriptionTip="请选择医图号描述";else if(""==this.ipDescriptionB)this.descriptionTip="请选择医图号描述";else if(""==this.ipType)this.typeTip="请选择医图号类型";else if(""!=this.ipName&&""!=this.imgOneSrc&&""!=this.imgTwoSrc&&""!=this.ipIntroduction&&""!=this.ipDescriptionA.toString()&&""!=this.ipDescriptionB&&""!=this.ipType){var t=localStorage.getItem("TOKEN");if("0"==this.ipDescriptionA)var e="母婴健康";else if("1"==this.ipDescriptionA)var e="饮食养生";else if("2"==this.ipDescriptionA)var e="保健疗养";else if("3"==this.ipDescriptionA)var e="两性生活";var a={ipname:this.ipName,summary:this.ipIntroduction,pic:this.imgOneSrc,tags:e+"|"+this.ipDescriptionB,qrcode:this.imgTwoSrc,iptype:this.ipType};this.$http.put("https://api.lotusdata.com/ip/v1/ipm/"+this.ipId,a,{headers:{Authorization:t}}).then(function(t){"success"==t.body.message&&(this.descriptionTip="",alert("医图号设置成功"))},function(){console.log("数据请求失败")})}}},watch:{}}}});